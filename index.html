<!DOCTYPE html>
<html>
<head>
  <title>YouTube Live Viewer w/ Google Sign-In</title>
  <meta name="google-signin-client_id" content="901141733729-usvhkcmlf33ndqam6cvnlr35dqep84c6.apps.googleusercontent.com">
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <style>
    body { font-family: Arial; background:#111; color:white; padding:20px; }
    #playerArea, #chatArea { display:none; margin-top:20px; }
    #signinDiv { margin-top:30px; }
    input { padding:10px; width:250px; border-radius:6px; border:none; }
    button { padding:10px 20px; border:none; border-radius:6px; cursor:pointer; }
    iframe { border:none; }
  </style>
</head>
<body>

<h2>YouTube Live Viewer</h2>

<div id="liveSelect">
  <p>Enter the YouTube **Live Video ID** you want to watch:</p>
  <input id="liveIdInput" placeholder="e.g. wXhTHyIgQ_U">
  <button onclick="saveLiveId()">Load Live</button>
</div>

<div id="signinDiv" style="margin-top:30px;">
  <h3>Sign in to continue</h3>
  <div id="g_id_onload"
       data-client_id="901141733729-usvhkcmlf33ndqam6cvnlr35dqep84c6.apps.googleusercontent.com"
       data-context="signin"
       data-callback="onGoogleSignIn"
       data-auto_prompt="false">
  </div>

  <div class="g_id_signin" data-type="standard"></div>
</div>

<!-- VIDEO AREA -->
<div id="playerArea">
  <h3>Live Video</h3>
  <iframe id="liveVideo" width="800" height="450"></iframe>
</div>

<!-- CHAT AREA -->
<div id="chatArea">
  <h3>Live Chat</h3>
  <iframe id="liveChat" width="400" height="450"></iframe>
</div>

<script>
let LIVE_ID = null;
const API_KEY = "AIzaSyCT0iOHCTHWYrLBSs2A-Th_jQK85pWsg40";

function saveLiveId() {
  LIVE_ID = document.getElementById("liveIdInput").value.trim();
  if (!LIVE_ID) return alert("Please enter a live ID.");
  alert("Live ID saved. Now sign in.");
}

// Google sign-in callback
function onGoogleSignIn(response) {
  if (!LIVE_ID) {
    alert("Enter a live ID first!");
    return;
  }

  // Hide sign-in UI
  document.getElementById("signinDiv").style.display = "none";
  document.getElementById("liveSelect").style.display = "none";

  // Show player + chat
  document.getElementById("playerArea").style.display = "block";
  document.getElementById("chatArea").style.display = "block";

  loadLiveEmbed();
}

function loadLiveEmbed() {
  const videoURL = `https://www.youtube.com/embed/${LIVE_ID}?autoplay=1`;
  const chatURL = `https://www.youtube.com/live_chat?v=${LIVE_ID}&embed_domain=${location.hostname}`;

  document.getElementById("liveVideo").src = videoURL;
  document.getElementById("liveChat").src = chatURL;
}
</script>

</body>
</html>
